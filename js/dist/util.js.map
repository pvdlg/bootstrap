{"version":3,"sources":["../src/util.js"],"names":["Util","$","transition","MAX_UID","MILLIS","TransitionEndEvent","WebkitTransition","MozTransition","OTransition","TRANSITION_END","toType","obj","toString","call","match","toLowerCase","isElement","nodeType","getSpecialTransitionEndEvent","bindType","end","delegateType","handle","event","target","is","handleObj","handler","apply","arguments","undefined","transitionEndTest","el","document","createElement","name","style","getCssTransitionDuration","element","durationArray","each","durationValues","css","concat","split","index","value","parseFloat","sort","a","b","transitionEmulator","start","complete","duration","called","one","executeCallback","setTimeout","callback","setTransitionEndSupport","fn","special","getUID","prefix","Math","random","getElementById","getTargets","selector","getAttribute","find","err","reflow","offsetHeight","typeCheckConfig","componentName","config","configTypes","property","hasOwnProperty","expectedTypes","valueType","RegExp","test","Error","toUpperCase","jQuery"],"mappings":";;AAGA;;;;;;;AAOA,IAAMA,OAAQ,UAACC,CAAD,EAAO;;AAGnB;;;;;;AAMA,MAAIC,aAAa,KAAjB;;AAEA,MAAMC,UAAU,OAAhB;;AAEA,MAAMC,SAAS,IAAf;;AAEA,MAAMC,qBAAqB;AACzBC,sBAAmB,qBADM;AAEzBC,mBAAmB,eAFM;AAGzBC,iBAAmB,+BAHM;AAIzBN,gBAAmB;AAJM,GAA3B;;AAOA,MAAMO,iBAAiB,iBAAvB;;AAEA;AACA,WAASC,MAAT,CAAgBC,GAAhB,EAAqB;AACnB,WAAO,GAAGC,QAAH,CAAYC,IAAZ,CAAiBF,GAAjB,EAAsBG,KAAtB,CAA4B,eAA5B,EAA6C,CAA7C,EAAgDC,WAAhD,EAAP;AACD;;AAED,WAASC,SAAT,CAAmBL,GAAnB,EAAwB;AACtB,WAAO,CAACA,IAAI,CAAJ,KAAUA,GAAX,EAAgBM,QAAvB;AACD;;AAED,WAASC,4BAAT,GAAwC;AACtC,WAAO;AACLC,gBAAUjB,WAAWkB,GADhB;AAELC,oBAAcnB,WAAWkB,GAFpB;AAGLE,YAHK,kBAGEC,KAHF,EAGS;AACZ,YAAItB,EAAEsB,MAAMC,MAAR,EAAgBC,EAAhB,CAAmB,IAAnB,CAAJ,EAA8B;AAC5B,iBAAOF,MAAMG,SAAN,CAAgBC,OAAhB,CAAwBC,KAAxB,CAA8B,IAA9B,EAAoCC,SAApC,CAAP,CAD4B,CAC0B;AACvD;AACD,eAAOC,SAAP;AACD;AARI,KAAP;AAUD;;AAED,WAASC,iBAAT,GAA6B;AAC3B,QAAMC,KAAKC,SAASC,aAAT,CAAuB,WAAvB,CAAX;;AAEA,SAAK,IAAMC,IAAX,IAAmB9B,kBAAnB,EAAuC;AACrC,UAAI2B,GAAGI,KAAH,CAASD,IAAT,MAAmBL,SAAvB,EAAkC;AAChC,eAAO;AACLV,eAAKf,mBAAmB8B,IAAnB;AADA,SAAP;AAGD;AACF;AACD;AACA,WAAO;AACLf,WAAKX;AADA,KAAP;AAGD;;AAED,WAAS4B,wBAAT,CAAkCC,OAAlC,EAA2C;AACzC;AACA,QAAIC,gBAAgB,EAApB;AACAD,YAAQE,IAAR,CAAa,YAAM;AACjB,UAAMC,iBAAiBH,QAAQI,GAAR,CAAY,qBAAZ,KAAsCJ,QAAQI,GAAR,CAAY,6BAAZ,CAAtC,IAAoFJ,QAAQI,GAAR,CAAY,0BAAZ,CAApF,IAA+HJ,QAAQI,GAAR,CAAY,yBAAZ,CAA/H,IAAyKJ,QAAQI,GAAR,CAAY,wBAAZ,CAAhM;AACA,UAAID,cAAJ,EAAoB;AAClBF,wBAAgBA,cAAcI,MAAd,CAAqBF,eAAeG,KAAf,CAAqB,GAArB,CAArB,CAAhB;AACD;AACF,KALD;AAMA3C,MAAEuC,IAAF,CAAOD,aAAP,EACE,UAACM,KAAD,EAAQC,KAAR,EAAkB;AAChBP,oBAAcM,KAAd,IAAuBE,WAAWD,KAAX,CAAvB;AACD,KAHH;AAKA,WAAOP,cAAcS,IAAd,CAAmB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAClC,aAAOA,IAAID,CAAX;AACD,KAFM,EAEJ,CAFI,CAAP;AAGD;;AAED,WAASE,kBAAT,CAA4BC,KAA5B,EAAmCC,QAAnC,EAA6C;AAAA;;AAC3C;AACA,QAAMC,WAAWjB,yBAAyB,IAAzB,CAAjB;AACA;AACA,QAAIiB,QAAJ,EAAc;AAAA;AACZ,YAAIC,SAAS,KAAb;AACA,cAAKC,GAAL,CAAS/C,cAAT,EAAyB,YAAM;AAC7B,cAAI,CAAC8C,MAAL,EAAa;AACXA,qBAAS,IAAT;AACAE,4BAAgBJ,QAAhB;AACD;AACF,SALD;AAMA;AACAK,mBAAW,YAAM;AACf,cAAI,CAACH,MAAL,EAAa;AACXA,qBAAS,IAAT;AACAE,4BAAgBJ,QAAhB;AACD;AACF,SALD,EAKGC,WAAWlD,MALd;AAMA;AACAqD,wBAAgBL,KAAhB;AAhBY;AAiBb,KAjBD,MAiBO;AACLK,sBAAgBL,KAAhB;AACAK,sBAAgBJ,QAAhB;AACD;AACD,WAAO,IAAP;AACD;;AAED,WAASI,eAAT,CAAyBE,QAAzB,EAAmC;AACjC,QAAIA,QAAJ,EAAc;AACZA;AACD;AACF;;AAED,WAASC,uBAAT,GAAmC;AACjC1D,iBAAa6B,mBAAb;AACA9B,MAAE4D,EAAF,CAAK3D,UAAL,GAAkBiD,kBAAlB;AACAlD,MAAEsB,KAAF,CAAQuC,OAAR,CAAgBrD,cAAhB,IAAkCS,8BAAlC;AACD;;AAGD;;;;;;AAMA,MAAMlB,OAAO;AAEX+D,UAFW,kBAEJC,MAFI,EAEI;AACb,SAAG;AACD;AACAA,kBAAU,CAAC,EAAEC,KAAKC,MAAL,KAAgB/D,OAAlB,CAAX,CAFC,CAEqC;AACvC,OAHD,QAGS8B,SAASkC,cAAT,CAAwBH,MAAxB,CAHT;AAIA,aAAOA,MAAP;AACD,KARU;AAUXI,cAVW,sBAUA9B,OAVA,EAUS;AAClB,UAAI+B,WAAW/B,QAAQgC,YAAR,CAAqB,aAArB,CAAf;AACA,UAAI,CAACD,QAAL,EAAe;AACbA,mBAAW/B,QAAQgC,YAAR,CAAqB,MAArB,KAAgC,EAA3C;AACD;AACD,UAAI;AACF,eAAOrE,EAAEgC,QAAF,EAAYsC,IAAZ,CAAiBF,QAAjB,CAAP;AACD,OAFD,CAEE,OAAOG,GAAP,EAAY;AACZ,eAAOvE,GAAP;AACD;AACF,KApBU;AAsBXwE,UAtBW,kBAsBJnC,OAtBI,EAsBK;AACd,aAAOA,QAAQoC,YAAf;AACD,KAxBU;AA0BXC,mBA1BW,2BA0BKC,aA1BL,EA0BoBC,MA1BpB,EA0B4BC,WA1B5B,EA0ByC;AAClD,WAAK,IAAMC,QAAX,IAAuBD,WAAvB,EAAoC;AAClC,YAAIA,YAAYE,cAAZ,CAA2BD,QAA3B,CAAJ,EAA0C;AACxC,cAAME,gBAAgBH,YAAYC,QAAZ,CAAtB;AACA,cAAMjC,QAAgB+B,OAAOE,QAAP,CAAtB;AACA,cAAMG,YAAgBpC,SAAS9B,UAAU8B,KAAV,CAAT,GACA,SADA,GACYpC,OAAOoC,KAAP,CADlC;;AAGA,cAAI,CAAC,IAAIqC,MAAJ,CAAWF,aAAX,EAA0BG,IAA1B,CAA+BF,SAA/B,CAAL,EAAgD;AAC9C,kBAAM,IAAIG,KAAJ,CACDT,cAAcU,WAAd,EAAH,wBACWP,QADX,yBACuCG,SADvC,oCAEsBD,aAFtB,QADI,CAAN;AAID;AACF;AACF;AACF;AA1CU,GAAb;;AA6CArB;;AAEA,SAAO5D,IAAP;AAED,CAjLY,CAiLVuF,MAjLU,CAAb","file":"util.js","sourcesContent":["import document from 'document'\nimport jQuery from 'jquery'\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-alpha.6): util.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst Util = (($) => {\n\n\n  /**\n   * ------------------------------------------------------------------------\n   * Private TransitionEnd Helpers\n   * ------------------------------------------------------------------------\n   */\n\n  let transition = false\n\n  const MAX_UID = 1000000\n\n  const MILLIS = 1000\n\n  const TransitionEndEvent = {\n    WebkitTransition : 'webkitTransitionEnd',\n    MozTransition    : 'transitionend',\n    OTransition      : 'oTransitionEnd otransitionend',\n    transition       : 'transitionend'\n  }\n\n  const TRANSITION_END = 'bsTransitionEnd'\n\n  // shoutout AngusCroll (https://goo.gl/pxwQGp)\n  function toType(obj) {\n    return {}.toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()\n  }\n\n  function isElement(obj) {\n    return (obj[0] || obj).nodeType\n  }\n\n  function getSpecialTransitionEndEvent() {\n    return {\n      bindType: transition.end,\n      delegateType: transition.end,\n      handle(event) {\n        if ($(event.target).is(this)) {\n          return event.handleObj.handler.apply(this, arguments) // eslint-disable-line prefer-rest-params\n        }\n        return undefined\n      }\n    }\n  }\n\n  function transitionEndTest() {\n    const el = document.createElement('bootstrap')\n\n    for (const name in TransitionEndEvent) {\n      if (el.style[name] !== undefined) {\n        return {\n          end: TransitionEndEvent[name]\n        }\n      }\n    }\n    // If the browser doesn't support transitionEnd then use the custom TRANSITION_END event\n    return {\n      end: TRANSITION_END\n    }\n  }\n\n  function getCssTransitionDuration(element) {\n    // let duration\n    let durationArray = []\n    element.each(() => {\n      const durationValues = element.css('transition-duration') || element.css('-webkit-transition-duration') || element.css('-moz-transition-duration') || element.css('-ms-transition-duration') || element.css('-o-transition-duration')\n      if (durationValues) {\n        durationArray = durationArray.concat(durationValues.split(','))\n      }\n    })\n    $.each(durationArray,\n      (index, value) => {\n        durationArray[index] = parseFloat(value)\n      }\n    )\n    return durationArray.sort((a, b) => {\n      return b - a\n    })[0]\n  }\n\n  function transitionEmulator(start, complete) {\n    // determine the longest transition duration (in case there is a transition on multiple attributes) from the css\n    const duration = getCssTransitionDuration(this)\n    // if there is a non 0 transition duration and transition are supported\n    if (duration) {\n      let called = false\n      this.one(TRANSITION_END, () => {\n        if (!called) {\n          called = true\n          executeCallback(complete)\n        }\n      })\n      // set a timeout to call complete in case (instead of using transitionend that can sometimes not be triggered). This way we can guarantee complete is always called\n      setTimeout(() => {\n        if (!called) {\n          called = true\n          executeCallback(complete)\n        }\n      }, duration * MILLIS)\n      // execute the start transition function, after setting the timeout\n      executeCallback(start)\n    } else {\n      executeCallback(start)\n      executeCallback(complete)\n    }\n    return this\n  }\n\n  function executeCallback(callback) {\n    if (callback) {\n      callback()\n    }\n  }\n\n  function setTransitionEndSupport() {\n    transition = transitionEndTest()\n    $.fn.transition = transitionEmulator\n    $.event.special[TRANSITION_END] = getSpecialTransitionEndEvent()\n  }\n\n\n  /**\n   * --------------------------------------------------------------------------\n   * Public Util Api\n   * --------------------------------------------------------------------------\n   */\n\n  const Util = {\n\n    getUID(prefix) {\n      do {\n        // eslint-disable-next-line no-bitwise\n        prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n      } while (document.getElementById(prefix))\n      return prefix\n    },\n\n    getTargets(element) {\n      let selector = element.getAttribute('data-target')\n      if (!selector) {\n        selector = element.getAttribute('href') || ''\n      }\n      try {\n        return $(document).find(selector)\n      } catch (err) {\n        return $()\n      }\n    },\n\n    reflow(element) {\n      return element.offsetHeight\n    },\n\n    typeCheckConfig(componentName, config, configTypes) {\n      for (const property in configTypes) {\n        if (configTypes.hasOwnProperty(property)) {\n          const expectedTypes = configTypes[property]\n          const value         = config[property]\n          const valueType     = value && isElement(value) ?\n                                'element' : toType(value)\n\n          if (!new RegExp(expectedTypes).test(valueType)) {\n            throw new Error(\n              `${componentName.toUpperCase()}: ` +\n              `Option \"${property}\" provided type \"${valueType}\" ` +\n              `but expected type \"${expectedTypes}\".`)\n          }\n        }\n      }\n    }\n  }\n\n  setTransitionEndSupport()\n\n  return Util\n\n})(jQuery)\n\nexport default Util\n"]}